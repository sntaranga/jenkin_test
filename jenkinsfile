pipeline {
    agent any

	options {
        skipDefaultCheckout()
    }

    stages {
        stage('Checkout and maven build') {
            
            stages {
                stage('Checkout') {
                    steps { mystep('checkout')}
                }
                stage('Maven build') {
                    steps { mystep('build') }
                }
            }
            post { always { cleanWs() } } 
        }
        stage('Docker build and publish') {
            agent any
            steps { mystep('B A P') }
            post { always { cleanWs() } }
        }
    }
}
def mystep(String name){
	println 'hellow $name'
}
